<!-- Created by Riddhi Omar on 27/04/2022 -->

<div class=" page-details">
  <div class="container-fluid card shadow-3-strong ">
    <div class="back">
      <button type="button" class="btn btn-light back" onclick="history.back()"><i class="mr-2 fa fa-arrow-left"
          aria-hidden="true"></i>Back</button>
    </div>
    <!-- page header start -->
    <div class="page-header">
      <div class="row align-items-center">
        <h3 class="page-title">Employee</h3>
        <ul class="breadcrumb">
          <li class="breadcrumb-item"><a routerLink="/dashboard/employee_dashbaord">Home</a></li>
          <li class="breadcrumb-item active1">Edit Employee</li>
        </ul>
      </div>
    </div>
    <!-- page header end -->
    <!-- Form start -->
    <form [formGroup]="notifyforms">
      <div class="form-row">
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputFrstName" class="text-bold ">First Name <span class="required">*</span> </label>
          <input type="text" class="form-control" id="InputFrstName" placeholder="Enter First Name"
            formControlName="first_name" [ngClass]="{'red-border-class': Submitted && fr.first_name.errors}" required>
        </div>
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputLstName" class="text-bold">Last Name <span class="required"></span>*</label>
          <input type="text" class="form-control " id="InputLstName" placeholder="Enter Last Name"
            formControlName="last_name" [ngClass]="{'red-border-class': Submitted && fr.first_name.errors}" required>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputFatherName" class="text-bold ">Father Name<span class="required">*</span> </label>
          <input type="text" class="form-control " id="InputFatherName" placeholder="Enter Father Name"
            formControlName="father_name" [ngClass]="{'red-border-class': Submitted && fr.father_name.errors}" required>
        </div>
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputDOB" class="text-bold">Date Of Birth<span class="required">*</span> </label>
          <input type="date" max="{{Dobmaxdate}}" class="form-control" id="InputDOB" formControlName="dob"
            [ngClass]="{'red-border-class': Submitted && fr.dob.errors}" required>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputGndr">Gender<span class="required">*</span> </label>
          <select class="form-select form-control dd" aria-label="Default select " formControlName="gender"
            [ngClass]="{'red-border-class': Submitted && fr.gender.errors}" required>
            <option selected>--Select Gender--</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="others">Others</option>
          </select>
        </div>
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputNmbr" class="text-bold">Mobile Number<span class="required">*</span> </label>
          <input type="number" class="form-control" id="InputNambr" placeholder="Enter Mobile Number"
            formControlName="mob_no" minlength=10 maxlength=10
            [ngClass]="{'red-border-class': Submitted && fr.mob_no.errors}" required>
          <div *ngIf="fr.mob_no.touched && fr.mob_no.invalid" class="alert alert-danger"
            style="font-size: 13px;height: 35%;margin-bottom: -26px;">
            <div *ngIf="fr.mob_no.errors.required" style="
            margin-top: -6px;
            margin-left: -7px;
        ">Mobile Number is required.</div>
            <div *ngIf="fr.mob_no.errors.pattern" style="
            margin-top: -6px;
            margin-left: -7px;
        ">*Please, Enter 10 digit Mobile Number.</div>
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputEmail1" class="text-bold ">Personal Email<span class="required">*</span> </label>
          <input type="email" class="form-control" id="InputEmail1" placeholder="Enter Email" formControlName="p_email"
            [ngClass]="{'red-border-class': Submitted && fr.p_email.errors}" required>
          <div *ngIf="fr.p_email.touched && fr.p_email.invalid"
            style="font-size: 13px;height: 35%;margin-bottom: -26px;" class="alert alert-danger">
            <div *ngIf="fr.p_email.errors.required" style="
            margin-top: -6px;
            margin-left: -7px;
        ">Please enter email </div>
            <div *ngIf="fr.p_email.errors.pattern" style="
            margin-top: -6px;
            margin-left: -7px;
        ">*Email must be a valid email address</div>
          </div>
        </div>
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputEmail2" class="text-bold ">Official Email<span class="required">*</span> </label>
          <input type="email" class="form-control " id="InputEmail2" placeholder="Enter Email"
            formControlName="off_email" [ngClass]="{'red-border-class': Submitted && fr.off_email.errors}" required>
          <div *ngIf="fr.off_email.touched && fr.off_email.invalid" class="alert alert-danger"
            style="font-size: 13px;height: 35%;margin-bottom: -26px;">
            <div *ngIf="fr.off_email.errors.required" style="
            margin-top: -6px;
            margin-left: -7px;">Please enter email </div>
            <div *ngIf="fr.off_email.errors.pattern" style="
            margin-top: -6px;
            margin-left: -7px;">*Email must be a valid email address</div>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputJnDate" class="text-bold">Joining Date<span class="required">*</span> </label>
          <input type="date" min="{{mindate}}" max="{{maxdate}}" class="form-control" id="InputJnDate"
            formControlName="join_date" [ngClass]="{'red-border-class': Submitted && fr.join_date.errors}" required>
        </div>
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputOrganization" style="width: 103%;">On Boarding Checklist Policy<span
              class="required">*</span> </label>

          <select class="form-select form-control dd" aria-label="Default select " formControlName="onchecklist_drop"
            (change)="getValue($event.target.value)" [ngClass]="{
    
                'red-border-class': Submitted && fr.onchecklist_drop.errors}" required>

            <option value="">Select Your Option</option>

            <option value="{{data.uniqueId}}" *ngFor='let data of onchecklist_dd'>{{data.name}}</option>

          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputOrganization">Organization<span class="required">*</span> </label>

          <select class="form-select form-control dd" aria-label="Default select " formControlName="organisation"
            (change)="getleavepolicy($event.target.value)" (change)="getonboardingchecklist($event.target.value)"
            (change)=" getprobationary($event.target.value)" (change)="getworkpolicy($event.target.value)"
            (change)="getnoticepolicy($event.target.value)" (change)="getdocpolicy($event.target.value)"
            (change)="getlinemanager($event.target.value)" (change)="getValue1($event.target.value)" [ngClass]="{

            'red-border-class': Submitted && fr.organisation.errors}" required>

            <option value="">Select Your Option</option>

            <option value="{{data.uniqueId}}" *ngFor='let data of org_dd'>{{data.name}}</option>

          </select>
        </div>
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputOrganization">Probation Policy<span class="required">*</span> </label>


          <select class="form-select form-control dd" aria-label="Default select " formControlName="prob_drop"
            (change)="getValue4($event.target.value)" [ngClass]="{

            'red-border-class': Submitted && fr.prob_drop.errors}" required>

            <option value="">Select Your Option</option>

            <option value="{{data.uniqueId}}" *ngFor='let data of prob_dd'>{{data.name}}</option>

          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputOrganization">Notice Policy<span class="required">*</span> </label>
          <select class="form-select form-control dd" aria-label="Default select " formControlName="notice_policy"
            (change)="getValue2($event.target.value)" [ngClass]="{
  
            'red-border-class': Submitted && fr.notice_policy.errors}" required>

            <option value="">Select Your Option</option>

            <option value="{{data.uniqueId}}" *ngFor='let data of notice_dd'>{{data.name}}</option>

          </select>
        </div>
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputOrganization">Work Policy<span class="required">*</span> </label>
          <select class="form-select form-control dd" aria-label="Default select " formControlName="work_policy"
            (change)="getValue3($event.target.value)" [ngClass]="{

          'red-border-class': Submitted && fr.work_policy.errors}" required>

            <option value="">Select Your Option</option>

            <option value="{{data.uniqueId}}" *ngFor='let data of work_dd'>{{data.name}}</option>

          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputOrganization">Leave Policy<span class="required">*</span> </label>
          <select class="form-select form-control dd" aria-label="Default select " formControlName="leave_policy"
            (change)="getValue5($event.target.value)" [ngClass]="{

          'red-border-class': Submitted && fr.leave_policy.errors}" required>

            <option value="">Select Your Option</option>

            <option value="{{data.uniqueId}}" *ngFor='let data of leave_dd'>{{data.name}}</option>

          </select>
        </div>

        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputOrganization">Document Policy<span class="required">*</span> </label>
          <select class="form-select form-control dd" aria-label="Default select " formControlName="doc_policy"
            (change)="getValue6($event.target.value)" [ngClass]="{

          'red-border-class': Submitted && fr.doc_policy.errors}" required>

            <option value="">Select Your Option</option>

            <option value="{{data.uniqueId}}" *ngFor='let data of doc_dd'>{{data.name}}</option>

          </select>
        </div>

        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputOrganization">Payroll policy<span class="required"></span> </label>
          <input class="form-select form-control dd" aria-label="Default select " formControlName="payroll_policy"
            (click)="getpayroll($event.target.value)">

          <!-- <option value="">Select Your Option</option>

        <option value="{{data.uniqueId}}"  data-target="#deleteModal" *ngFor='let data of payroll_dd' >{{data.name}}</option> -->


        </div>


      </div>
      <div class="form-row">
        <div class="form-group col-lg-5 col-md-12 mx-3">
          <label for="InputOrganization">Line Manager<span class="required"></span> </label>
          <select class="form-select form-control dd" aria-label="Default select " formControlName="line_manager"
            (change)="getValue7($event.target.value)">

            <option value="">Select Your Option</option>

            <option value="{{data.userName}}" *ngFor='let data of lm_dd'>{{data.name}} </option>

          </select>
        </div>


        <div class="form-group col-lg-5 col-md-12 mx-3">
          <br>
          <button type="submit" (click)="updateimp()" class="btn font-weight-bold mt-2 ">Update Employee</button>
        </div>
      </div>
    </form>
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="langModalLabel"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header" style="background: #ff9b44;color: #fff;">
            <h5 class="modal-title mt-0" id="langModalLabel">Delete</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label class="control-label">Are you sure you want to delete this item ?<span class="required"></span>
                </label>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary prim" style="background: #ff9b44; border: none; color: #fff;"
              (click)="deletedata()">OK</button>
            <button type="button" class="btn btn-danger clos" data-dismiss="modal">
              <i class="fa fa-times" aria-hidden="true"></i>&nbsp;Close</button>


          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="payrollModal" tabindex="-1" role="dialog" aria-labelledby="langModalLabel"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div style="width:134% !important;" class="modal-content">
          <div class="modal-header" style="background: #ff9b44;color: #fff;">
            <h5 class="modal-title mt-0" id="langModalLabel">payroll</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form [formGroup]="payrollForms" style="padding:10px">
            <div style="display:flex">
              <div class="form-group" style="padding: 20px; ">
                <label for="InputName" class="text-bold">Name<span class="required"></span> </label>
                <input type="text" class="form-control" id="InputName" size="50" placeholder="Enter Name"
                  formControlName="name" disabled>
              </div>
              <div style="padding: 20px; ">
                <label for="InputName" class="text-bold">Salary<span class="required">*</span> </label>
                <input type="text" class="form-control" id="InputName" size="50" placeholder="Enter Amount"
                  formControlName="salry" (change)="payroll($event.target.value)"
                  [ngClass]="{'red-border-class': Submitted && fr1.salry.errors}" required>
              </div>
            </div>
            <hr>
            <div style="display: flex;">
              <div style="padding: 20px; border: 1px solid #ede9e9;">
                <h6><u>Earning List</u></h6>
                <div>
                  <label>Basic Salary<span class="required">*</span></label>
                  <input class="form-control" type="text" id="InputName" size="50" placeholder=""
                    (change)="manualcalcluation()" formControlName="basicsalary">
                  <label>HRA<span class="required">*</span></label>
                  <input class="form-control" type="text" id="InputName" value=" " size="50" placeholder=""
                    (change)="manualcalcluation()" formControlName="hra">
                  <label>Conveyance Allowences<span class="required">*</span></label>
                  <input class="form-control" type="text" id="InputName" value=" " size="50" placeholder=""
                    (change)="manualcalcluation()" formControlName="conveyallownce">
                  <label>Education Allowences<span class="required">*</span></label>
                  <input class="form-control" type="text" id="InputName" value=" " size="50" placeholder=""
                    (change)="manualcalcluation()" formControlName="educationallow">
                  <label style="color:limegreen">Total gross salary<span class="required">*</span></label>
                  <input style="font-weight: bold;" class="form-control border-0" type="text" id="InputName" value=" "
                    size="50" placeholder="" (change)="netsalvalue()" formControlName="totalgs" disabled>
                </div>
              </div>

              <div style="padding: 20px;border: 1px solid #ede9e9 ;">
                <h6><u>Deduction List</u></h6>
                <div>
                  <label>PF Contibution <span class="required">*</span> </label>
                  <input class="form-control" type="text" id="InputName" value="" size="50" placeholder=""
                    (change)="dedctioncal()" formControlName="pf">
                  <label>ESIC Contibution <span class="required">*</span> </label>
                  <input class="form-control" type="text" id="InputName" value="" size="50" placeholder=""
                    (change)="dedctioncal()" formControlName="esic">

                  <div style="margin-top:140px; color:red; ">
                    <label>Total Deduction <span class="required">*</span> </label>
                    <input style="color:red; font-weight: bold; " class="form-control border-1" type="text"
                      id="InputName" value="" size="50" placeholder="" (change)="netsalvalue()"
                      formControlName="totaldeduc" disabled>
                  </div>
                </div>
              </div>
            </div>
            <div style="padding: 20px;">
              <label style="color:limegreen">Net Salary(Gross-total deduction) <span class="required">*</span> </label>
              <input style="font-weight: bold;" class="form-control border-0" type="text" id="InputName" value=""
                size="50" placeholder="" formControlName="netsalary" disabled>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary prim" style="background: #ff9b44; border: none; color: #fff;"
                data-dismiss="modal" (click)="savepayroll()">Save</button>
            </div>

          </form>

        </div>
      </div>
    </div>

    <!-- Form end -->
  </div>
</div>
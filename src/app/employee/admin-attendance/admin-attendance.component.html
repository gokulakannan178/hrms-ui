<!-- Page Wrapper -->
<div class="page-wrapper page-wrap1">
    <div class="content container-fluid ">

        <!-- Page Header -->
        <div class="page-header">
            <div class="row">
                <div class="col-sm-12">
                    <h3  class="page-title">Attendance</h3>
                    <ul class="breadcrumb">
                        <li class="breadcrumb-item"><a routerLink="/dashboard">Home</a></li>
                    


                        <li   class="breadcrumb-item active">Attendance</li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- /Page Header -->

        <!-- Search Filter -->
        <div class="row filter-row">
            <div class="col-sm-6 col-md-3">
                <label >Employee Name</label>
                <div class="form-group form-focus">
                    <input type="text" class="form-control floating"  
                    [(ngModel)]="term" (keyup)="search1()" [ngModelOptions]="{standalone: true}">
                    <!-- <label class="focus-label">Employee Name</label> -->
                </div>
            </div>
            <div class="col-sm-6 col-md-3">
                <label >Select Month</label>
                <div class="form-group form-focus select-focus">
                    <select class="select floating form-control"  [(ngModel)]="month" [ngModelOptions]="{standalone: true}">
                        <option>-</option>
                        <option  value="01">Jan</option>
                        <option  value="02">Feb</option>
                        <option  value="03">Mar</option>
                        <option  value="04">Apr</option>
                        <option  value="05">May</option>
                        <option  value="06">Jun</option>
                        <option  value="07">Jul</option>
                        <option  value="08">Aug</option>
                        <option  value="09">Sep</option>
                        <option  value="10">Oct</option>
                        <option  value="11">Nov</option>
                        <option  value="12">Dec</option>
                    </select>
                    
                </div>
            </div>
            <div class="col-sm-6 col-md-3" >
                <label >Select Year</label>
                <div class="form-group form-focus select-focus">
                    <select class="select floating form-control" [(ngModel)]="year" [ngModelOptions]="{standalone: true}">
                        <option>-</option>
                        <!-- <option  value="2043">2043</option>
                        <option  value="2042">2042</option>
                        <option  value="2041">2041</option>
                        <option  value="2040">2040</option>
                        <option  value="2039">2039</option>
                        <option  value="2038">2038</option>
                        <option  value="2037">2037</option>
                        <option  value="2036">2036</option>
                        <option  value="2035">2035</option>
                        <option  value="2034">2034</option>
                        <option  value="2033">2033</option>
                        <option  value="2032">2032</option>
                        <option  value="2031">2031</option>
                        <option  value="2030">2030</option>
                        <option  value="2029">2029</option>
                        <option  value="2028">2028</option>
                        <option  value="2027">2027</option>
                        <option  value="2026">2026</option>
                        <option  value="2025">2025</option>
                        <option  value="2024">2024</option> -->
                        <option  value="2023">2023</option>
                        <option  value="2022">2022</option>
                        <option  value="2021">2021</option>
                        <option  value="2020">2020</option>
                        <option  value="2019">2019</option>
                        <option  value="2018">2018</option>
                        <option  value="2017">2017</option>
                        <option  value="2016">2016</option>
                        <option  value="2015">2015</option>
                    </select>
                   
                </div>
            </div>
            <div class="col-sm-6 col-md-2" style="display:flex">
                <button class="btn btn-success btn-block" (click)="search(1)"> Search </button>

                <div><a  rel="noopener noreferrer" (click)="documentexcel()"><i class="fa fa-file fileclass">
                </i></a></div>
            </div>
        </div>
        <!-- /Search Filter -->

        <div class="row">
            <div class="col-lg-12">
                <div class="table-responsive">
                    <table class="table table-striped custom-table table-nowrap mb-0">
                        <thead>
                            <tr>
                                <th>Employee</th>
                                 <th *ngFor="let data of attedancedatelist">{{data}}</th>
                                 <!-- <th>2</th>
                                <th>3</th>
                                <th>4</th>
                                <th>5</th>
                                <th>6</th>
                                <th>7</th>
                                <th>8</th>
                                <th>9</th>
                                <th>10</th>
                                <th>11</th>
                                <th>12</th>
                                <th>13</th>
                                <th>14</th>
                                <th>15</th>
                                <th>16</th>
                                <th>17</th>
                                <th>18</th>
                                <th>19</th>
                                <th>20</th>
                                <th>21</th>
                                <th>22</th>
                                <th>23</th>
                                <th>24</th>
                                <th>25</th>
                                <th>26</th>
                                <th>27</th>
                                <th>28</th>
                                <th>29</th>
                                <th>30</th>
                                <th>31</th>  -->
                            </tr>
                        </thead>
                        <tbody>
                            <tr  *ngFor="let data of attedance">
                                <td>
                                    <h2 class="table-avatar point" style="cursor:pointer;" (click)="route1(data.uniqueId)">{{data.name}}
                                        <!-- <a class="avatar avatar-xs" routerLink="/employee/employee_profile"><img alt=""
                                                src="assets/img/profiles/avatar-09.jpg"></a>
                                        <a routerLink="/employee/employee_profile">Mayank Sekhar</a> -->
                                    </h2>
                                </td>
                                 <td  *ngFor="let attenddata of data.days">
                                     <a *ngIf="attenddata.attendance.payRoll=='Paid'" href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success" (click)="route2(attenddata)"></i></a>
                                            <span class="first-off" *ngIf="attenddata.attendance.payRoll=='LOP'"><i class="fa fa-close text-danger"></i></span>
                                            <a *ngIf="attenddata.attendance.payRoll=='PartialPay'" href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                                class="fa fa-check"(click)="route2(attenddata)" style="color: yellow;"></i></a>
                                                <a *ngIf="attenddata.attendance.payRoll=='PaidLeave'"><i
                                                    class="fa fa-close" style="color: #2ba635;"></i></a>
                                                    <a *ngIf="attenddata.attendance.payRoll=='UnpaidLeave'"><i
                                                        class="fa fa-check text-danger"></i></a>
                                        </td>
                                <!-- <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td>
                                    <div class="half-day">
                                        <span class="first-off"><a href="javascript:void(0);" data-toggle="modal"
                                                data-target="#attendance_info"><i
                                                    class="fa fa-check text-success"></i></a></span>
                                        <span class="first-off"><i class="fa fa-close text-danger"></i></span>
                                    </div>
                                </td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><i class="fa fa-close text-danger"></i> </td>
                                <td><i class="fa fa-close text-danger"></i> </td>
                                <td><i class="fa fa-close text-danger"></i> </td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><i class="fa fa-close text-danger"></i> </td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td>
                                    <div class="half-day">
                                        <span class="first-off"><i class="fa fa-close text-danger"></i></span>
                                        <span class="first-off"><a href="javascript:void(0);" data-toggle="modal"
                                                data-target="#attendance_info"><i
                                                    class="fa fa-check text-success"></i></a></span>
                                    </div>
                                </td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><i class="fa fa-close text-danger"></i> </td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><i class="fa fa-close text-danger"></i> </td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td>
                                <td><a href="javascript:void(0);" data-toggle="modal" data-target="#attendance_info"><i
                                            class="fa fa-check text-success"></i></a></td> -->
                            </tr>


                        
                        </tbody>
                    </table>
                    <div class="row m-0" style="    justify-content: space-between;
                    padding: 0px 17px 0px 15px;">
                            <div>
                                <ul class="pagination mt-5">
                                    <li class="page-item">
                                        <a class="page-link" (click)="setPageactiveemp(1)">First</a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link"
                                            (click)="setPageactiveemp(pageractiveemp.currentPage - 1)">Previous</a>
                                    </li>
                                    <li class="page-item" *ngFor="let page of pageractiveemp.pages">
                                        <a class="page-link" (click)="setPageactiveemp(page)">{{page}}</a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link"
                                            (click)="setPageactiveemp(pageractiveemp.currentPage + 1)">Next</a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link"
                                            (click)="setPageactiveemp(pageractiveemp.totalPages)">Last</a>
                                    </li>
                                </ul>
                                <label style="color: black;">Total Record- {{activeemp_count}}</label>
                            </div>
                            <div>
                                <ul class="pagination mt-5 pull-right">
                                    <li class="page-item">
                                        <a class="page-link" (click)="saveactiveempItems(10)">10</a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link" (click)="saveactiveempItems(50)">50</a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link" (click)="saveactiveempItems(100)">100</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /Page Content -->

    <!-- Attendance Modal -->
    <div class="modal custom-modal fade" id="attendance_info" role="dialog">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Attendance Info</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card punch-status">
                                <div class="card-body">
                                    <h5 class="card-title">Timesheet <small class="text-muted">{{getapplication.date?(getapplication.date| date: 'd MMMM , y'):"---:---"}}</small></h5>
                                    <div class="punch-det">
                                        <h6>Punch In at</h6>
                                        <p>{{getapplication.attendance?.punchIn ?(getapplication.attendance?.punchIn | date: 'EEEE, MMMM d, y, h:mm a'):"---:---"}}</p>
                                    </div>
                                    <div class="punch-info">
                                        <div class="punch-hours">
                                            <span>{{getapplication.attendance?.totalworkingHoursStr ?(getapplication.attendance?.totalworkingHoursStr ):"---:---"}}</span>
                                        </div>
                                    </div>
                                    <div class="punch-det">
                                        <h6>Punch Out at</h6>
                                        <p>{{getapplication.attendance?.punchOut ?(getapplication.attendance?.punchOut | date: 'EEEE, MMMM d, y, h:mm a'):"---:---"}}</p>
                                    </div>
                                    <div class="statistics">
                                        <div class="row">
                                            <div class="col-md-6 col-6 text-center">
                                                <div class="stats-box">
                                                    <p>Overtime</p>
                                                    <h6>{{getapplication.attendance?.totalOverTimehoursstr ?(getapplication.attendance?.totalOverTimehoursstr ):"---:---"}}</h6>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-6 text-center">
                                                <div class="stats-box">
                                                    <p>Breaktime</p>
                                                    <h6>{{getapplication.attendance?.totalbreakHoursStr ?(getapplication.attendance?.totalbreakHoursStr ):"---:---"}}</h6>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card recent-activity">
                                <div class="card-body">
                                    <h5 class="card-title">Activity</h5>
                                  <ul *ngFor="let activity of getactivity;let i =index" class="res-activity-list today_activity"style="height: 101px;">
                                        <li >
                                            <p class="mb-0  " >Punch In at</p>
                                            <p class="res-activity-time ">
                                                <i class="fa fa-clock-o"></i>
                                                {{activity.punchinTime | date: 'h:mm a'}}
                                            </p>
                                        </li>
                                        <li>
                                            <p class="mb-0">Punch Out at</p>
                                            <p class="res-activity-time">
                                                <i class="fa fa-clock-o"></i>
                                                {{activity.punchoutTime | date: 'h:mm a'}}
                                            </p>
                                        </li>
                                       
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /Attendance Modal -->

</div>
<!-- Page Wrapper -->